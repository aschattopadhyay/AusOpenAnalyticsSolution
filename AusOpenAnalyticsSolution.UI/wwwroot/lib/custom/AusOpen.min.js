function displayCurrentSet(n){function t(t){var i={top:60,right:60,bottom:60,left:120},e=800-i.left-i.right,u=500-i.top-i.bottom,f=d3.scale.ordinal().domain(t.map(function(n){return n.Player})).rangeRoundBands([0,e],.05),o=d3.scale.linear().domain([0,d3.max(t,function(n){return n.CurrentSet})]).range([u,0]),s=d3.svg.axis().scale(f).orient("bottom"),h=d3.svg.axis().scale(o).orient("left"),r=d3.select("#divVisualisationDisplay").append("svg").attr("width",e+i.left+i.right).attr("height",u+i.top+i.bottom).append("g").attr("transform","translate("+i.left+","+i.top+")");r.append("g").attr("class","axis x").attr("transform","translate(0,"+u+")").call(s);r.append("text").attr("x",e/2).attr("y",-35).attr("text-anchor","middle").style("font-weight","bold").text("Number of Games Won in Current Set");r.append("text").attr("x",e/2).attr("y",u+i.bottom-20).style("text-anchor","middle").text("Player");r.append("g").attr("class","axis y").call(h);r.append("text").attr("transform","rotate(-90)").attr("y",0-i.left).attr("x",0-u/2).attr("dy","1em").style("text-anchor","middle").text("Number of Games");r.selectAll(".bar").data(t).enter().append("rect").attr("class","bar").style("fill",function(n){return n.Player=="Rafael Nadal"?"#b23738":"#efb7b6"}).attr("x",function(n){return f(n.Player)}).attr("y",function(n){return o(n.CurrentSet)}).attr("width",f.rangeBand()).attr("height",function(n){return u-o(n.CurrentSet)});r.selectAll("text.bar").data(n).enter().append("text").attr("class","bar").attr("text-anchor","middle").attr("x",function(n){return f(n.Player)+f.rangeBand()/2}).attr("y",function(n){return o(n.CurrentSet)-10}).text(function(n){return n.CurrentSet})}t(n)}function displayFirstServePercentage(n){function t(t){var i={top:60,right:60,bottom:60,left:120},e=800-i.left-i.right,u=500-i.top-i.bottom,f=d3.scale.ordinal().domain(t.map(function(n){return n.Player})).rangeRoundBands([0,e],.05),o=d3.scale.linear().domain([0,d3.max(t,function(n){return n.CurrentSet})]).range([u,0]),s=d3.svg.axis().scale(f).orient("bottom"),h=d3.svg.axis().scale(o).orient("left"),r=d3.select("#divVisualisationDisplay").append("svg").attr("width",e+i.left+i.right).attr("height",u+i.top+i.bottom).append("g").attr("transform","translate("+i.left+","+i.top+")");r.append("g").attr("class","axis x").attr("transform","translate(0,"+u+")").call(s);r.append("text").attr("x",e/2).attr("y",-35).attr("text-anchor","middle").style("font-weight","bold").text("1st Serve Percentage");r.append("text").attr("x",e/2).attr("y",u+i.bottom-20).style("text-anchor","middle").text("Player");r.append("g").attr("class","axis y").call(h);r.append("text").attr("transform","rotate(-90)").attr("y",0-i.left).attr("x",0-u/2).attr("dy","1em").style("text-anchor","middle").text("Percentage");r.selectAll(".bar").data(t).enter().append("rect").attr("class","bar").style("fill",function(n){return n.Player=="Rafael Nadal"?"#b23738":"#efb7b6"}).attr("x",function(n){return f(n.Player)}).attr("y",function(n){return o(n.CurrentSet)}).attr("width",f.rangeBand()).attr("height",function(n){return u-o(n.CurrentSet)});r.selectAll("text.bar").data(n).enter().append("text").attr("class","bar").attr("text-anchor","middle").attr("x",function(n){return f(n.Player)+f.rangeBand()/2}).attr("y",function(n){return o(n.CurrentSet)-10}).text(function(n){return n.CurrentSet})}t(n)}function displayTotalSet(n){var i={top:60,right:60,bottom:60,left:120},r=300,t=r/2,h=t+30,i={top:150,right:60,bottom:60,left:400},e=["rgb(178, 55, 56)","rgb(239, 183, 182)"],o=d3.select("#divVisualisationDisplay").append("svg:svg").data([n]).attr("width",800).attr("height",r).append("svg:g").attr("transform","translate("+i.left+","+i.top+")"),s=d3.layout.pie().value(function(n){return n.value}),u=d3.svg.arc().outerRadius(t),f=o.selectAll("g.slice").data(s).enter().append("svg:g").attr("class","slice");f.append("svg:path").attr("fill",function(n,t){return e[t]}).attr("d",function(n){return u(n)});f.append("svg:text").attr("transform",function(n){return n.innerRadius=20,n.outerRadius=t,"translate("+u.centroid(n)+")"}).attr("text-anchor","middle").attr("font-size","20px").text(function(t,i){return n[i].value})}function displayMatchWinningPrediction(n,t){var i={top:60,right:60,bottom:60,left:50},r={id:"mySvg",width:1200-i.left-i.right,height:500-i.top-i.bottom},e=d3.select("#divVisualisationDisplay"),u=e.append("svg").attr("width",r.width+i.left+i.right).attr("height",r.height+i.top+i.bottom).append("g").attr("transform","translate("+i.left+","+i.top+")"),f;xScale=d3.scale.linear().range([i.left,r.width-i.right]).domain([d3.min(n.data,function(n){return+n.point}),d3.max(n.data,function(n){return+n.point})]);yScale=d3.scale.linear().range([r.height-i.top,i.bottom]).domain([d3.min(n.data,function(){return 0}),d3.max(n.data,function(){return 1})]);xAxis=d3.svg.axis().scale(xScale).tickFormat(d3.format("d")).innerTickSize(-r.height);yAxis=d3.svg.axis().orient("left").scale(yScale).innerTickSize(-r.width);u.append("svg:g").attr("id","xAxis").attr("class","axis").call(xAxis);d3.select("#xAxis").attr("transform","translate(0,"+(r.height-i.bottom)+")");u.append("svg:g").attr("id","yAxis").attr("class","axis").call(yAxis);d3.select("#yAxis").attr("transform","translate("+i.left+",0)");f=d3.svg.line().interpolate("basis").x(function(n){return xScale(n.point)}).y(function(n){return yScale(n.probability)});u.append("svg:path").attr("d",f(n.data)).attr("stroke","#b23738").attr("stroke-width",2).attr("fill","none");u.append("svg:path").attr("d",f(t.data)).attr("stroke","#efb7b6").attr("stroke-width",2).attr("fill","none");u.append("text").attr("x",r.width/2).attr("y",0).attr("text-anchor","middle").style("font-weight","bold").text("Match Winning Prediction");u.append("text").attr("x",r.width/2).attr("y",r.height+i.bottom-60).style("text-anchor","middle").text("Points");u.append("text").attr("transform","rotate(-90)").attr("y",-20).attr("x",-120-i.left).attr("dy","1em").style("text-anchor","middle").text("Probability of Winning")}function displayNumberOfAces(n){n=n.sort(function(n,t){return d3.ascending(n.value,t.value)});var t={top:15,right:25,bottom:15,left:100},r=960-t.left-t.right,u=500-t.top-t.bottom,f=d3.select("#divVisualisationDisplay").append("svg").attr("width",r+t.left+t.right).attr("height",u+t.top+t.bottom).append("g").attr("transform","translate("+t.left+","+t.top+")"),e=d3.scale.linear().range([0,r]).domain([0,d3.max(n,function(n){return n.value})]),i=d3.scale.ordinal().rangeRoundBands([u,0],.1).domain(n.map(function(n){return n.name})),s=d3.svg.axis().scale(i).tickSize(0).orient("left"),h=f.append("g").attr("class","y axis").style("padding-right","10px").call(s),o=f.selectAll(".bar").data(n).enter().append("g");o.append("rect").attr("class","bar").attr("y",function(n){return i(n.name)}).style("fill",function(n){return n.name=="Rafael Nadal"?"#b23738":"#efb7b6"}).attr("height",i.rangeBand()-40).attr("x",0).attr("width",function(n){return e(n.value)});o.append("text").attr("class","label").attr("y",function(n){return i(n.name)+i.rangeBand()/2+5}).attr("x",function(n){return e(n.value)+3}).style("font-size","16px").text(function(n){return n.value})}function displayOnCourtShotPattern(n,t){var u,i,r;$("#divVisualisationDisplay").append('<div id="divCourt"><svg id="svgCourt" height="400" width="1140" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><rect x="0" y="10" height="400" width="1140" style="fill: #0090d4" /><line x1="570" y1="10" x2="570" y2="410" style="stroke:#FFFFFF;stroke-width: 2;" /><line x1="0" y1="60" x2="1140" y2="60" style="stroke:#FFFFFF;stroke-width: 2;" /><line x1="0" y1="350" x2="1140" y2="350" style="stroke:#FFFFFF;stroke-width: 2;" /><line x1="257" y1="60" x2="257" y2="350" style="stroke:#FFFFFF;stroke-width: 2;" /><line x1="883" y1="60" x2="883" y2="350" style="stroke:#FFFFFF;stroke-width: 2;" /><line x1="257" y1="205" x2="883" y2="205" style="stroke:#FFFFFF;stroke-width: 2;" /><\/svg ><\/div >');u="<div style='margin-top:10px;' id='currentGame'><div><b>Probability of Wide on 2nd Serve from Left<\/b><\/div><div><b>"+n.Name+":<\/b> <span style='font-weight:bold;color:#0090d4;'>"+n.ProbabilityOfWideSecondServeFromLeft+"%<\/span><br/><b>"+t.Name+":<\/b> <span style='font-weight:bold;color:#0090d4;'>"+t.ProbabilityOfWideSecondServeFromLeft+"%<\/span><\/div><\/div>";$("#divVisualisationDisplay").append(u);n.ServeDirection&&(n.ServeDirection==="L"?(i=n.FirstServeShot,r=n.SecondServeShot,i.charAt(1)==="n"&&(appendSvgElement(570,132.5,"#b23738"),$("#divCourt").notify("Net fault!",{position:"top center"})),(i.charAt(1)==="w"||i.charAt(1)==="d"||i.charAt(1)==="x"||i.charAt(1)==="g"||i.charAt(1)==="!"||i.charAt(1)==="e"||i.charAt(1)==="V")&&$("#divCourt").notify("Serve fault!",{position:"top center"}),i.charAt(1)!="w"&&i.charAt(1)!="d"&&i.charAt(1)!="x"&&i.charAt(1)!="g"&&i.charAt(1)!="!"&&i.charAt(1)!="e"&&i.charAt(1)!="V"&&i.charAt(1)!="n"&&(i.charAt(0)==="4"&&appendSvgElement(300,75,"#b23738"),i.charAt(0)==="5"&&appendSvgElement(300,132.5,"#b23738"),i.charAt(0)==="6"&&appendSvgElement(300,190,"#b23738")),r.charAt(1)==="n"&&(appendSvgElement(570,132.5,"#b23738"),$("#divCourt").notify("Net fault!",{position:"top center"})),(r.charAt(1)==="w"||r.charAt(1)==="d"||r.charAt(1)==="x"||r.charAt(1)==="g"||r.charAt(1)==="!"||r.charAt(1)==="e"||r.charAt(1)==="V")&&$("#divCourt").notify("Serve fault!",{position:"top center"}),r.charAt(1)!="w"&&r.charAt(1)!="d"&&r.charAt(1)!="x"&&r.charAt(1)!="g"&&r.charAt(1)!="!"&&r.charAt(1)!="e"&&r.charAt(1)!="V"&&r.charAt(1)!="n"&&(r.charAt(0)==="4"&&appendSvgElement(300,75,"#b23738"),r.charAt(0)==="5"&&appendSvgElement(300,132.5,"#b23738"),r.charAt(0)==="6"&&appendSvgElement(300,190,"#b23738"))):(i=n.FirstServeShot,r=n.SecondServeShot,i.charAt(1)==="n"&&(appendSvgElement(570,277.5,"#b23738"),$("#divCourt").notify("Net fault!",{position:"top center"})),(i.charAt(1)==="w"||i.charAt(1)==="d"||i.charAt(1)==="x"||i.charAt(1)==="g"||i.charAt(1)==="!"||i.charAt(1)==="e"||i.charAt(1)==="V")&&$("#divCourt").notify("Serve fault!",{position:"top center"}),i.charAt(1)!="w"&&i.charAt(1)!="d"&&i.charAt(1)!="x"&&i.charAt(1)!="g"&&i.charAt(1)!="!"&&i.charAt(1)!="e"&&i.charAt(1)!="V"&&i.charAt(1)!="n"&&(i.charAt(0)==="4"&&appendSvgElement(300,335,"#b23738"),i.charAt(0)==="5"&&appendSvgElement(300,277.5,"#b23738"),i.charAt(0)==="6"&&appendSvgElement(300,220,"#b23738")),r.charAt(1)==="n"&&(appendSvgElement(570,277.5,"#b23738"),$("#divCourt").notify("Net fault!",{position:"top center"})),(r.charAt(1)==="w"||r.charAt(1)==="d"||r.charAt(1)==="x"||r.charAt(1)==="g"||r.charAt(1)==="!"||r.charAt(1)==="e"||r.charAt(1)==="V")&&$("#divCourt").notify("Serve fault!",{position:"top center"}),r.charAt(1)!="w"&&r.charAt(1)!="d"&&r.charAt(1)!="x"&&r.charAt(1)!="g"&&r.charAt(1)!="!"&&r.charAt(1)!="e"&&r.charAt(1)!="V"&&r.charAt(1)!="n"&&(r.charAt(0)==="4"&&appendSvgElement(300,335,"#b23738"),r.charAt(0)==="5"&&appendSvgElement(300,277.5,"#b23738"),r.charAt(0)==="6"&&appendSvgElement(300,220,"#b23738"))));t.ServeDirection&&(t.ServeDirection==="R"?(i=t.FirstServeShot,r=t.SecondServeShot,i.charAt(1)==="n"&&(appendSvgElement(570,120,"#efb7b6"),$("#divCourt").notify("Net fault!",{position:"top center"})),(i.charAt(1)==="w"||i.charAt(1)==="d"||i.charAt(1)==="x"||i.charAt(1)==="g"||i.charAt(1)==="!"||i.charAt(1)==="e"||i.charAt(1)==="V")&&$("#divCourt").notify("Serve fault!",{position:"top center"}),i.charAt(1)!="w"&&i.charAt(1)!="d"&&i.charAt(1)!="x"&&i.charAt(1)!="g"&&i.charAt(1)!="!"&&i.charAt(1)!="e"&&i.charAt(1)!="V"&&i.charAt(1)!="n"&&(i.charAt(0)==="4"&&appendSvgElement(840,75,"#efb7b6"),i.charAt(0)==="5"&&appendSvgElement(840,132.5,"#efb7b6"),i.charAt(0)==="6"&&appendSvgElement(840,190,"#efb7b6")),r.charAt(1)==="n"&&(appendSvgElement(570,120,"#efb7b6"),$("#divCourt").notify("Net fault!",{position:"top center"})),(r.charAt(1)==="w"||r.charAt(1)==="d"||r.charAt(1)==="x"||r.charAt(1)==="g"||r.charAt(1)==="!"||r.charAt(1)==="e"||r.charAt(1)==="V")&&$("#divCourt").notify("Serve fault!",{position:"top center"}),r.charAt(1)!="w"&&r.charAt(1)!="d"&&r.charAt(1)!="x"&&r.charAt(1)!="g"&&r.charAt(1)!="!"&&r.charAt(1)!="e"&&r.charAt(1)!="V"&&r.charAt(1)!="n"&&(r.charAt(0)==="4"&&appendSvgElement(840,75,"#efb7b6"),r.charAt(0)==="5"&&appendSvgElement(840,132.5,"#efb7b6"),r.charAt(0)==="6"&&appendSvgElement(840,190,"#efb7b6"))):(i=t.FirstServeShot,r=t.SecondServeShot,i.charAt(1)==="n"&&(appendSvgElement(570,265,"#efb7b6"),$("#divCourt").notify("Net fault!",{position:"top center"})),(i.charAt(1)==="w"||i.charAt(1)==="d"||i.charAt(1)==="x"||i.charAt(1)==="g"||i.charAt(1)==="!"||i.charAt(1)==="e"||i.charAt(1)==="V")&&$("#divCourt").notify("Serve fault!",{position:"top center"}),i.charAt(1)!="w"&&i.charAt(1)!="d"&&i.charAt(1)!="x"&&i.charAt(1)!="g"&&i.charAt(1)!="!"&&i.charAt(1)!="e"&&i.charAt(1)!="V"&&i.charAt(1)!="n"&&(i.charAt(0)==="4"&&appendSvgElement(840,335,"#efb7b6"),i.charAt(0)==="5"&&appendSvgElement(840,277.5,"#efb7b6"),i.charAt(0)==="6"&&appendSvgElement(840,220,"#efb7b6")),r.charAt(1)==="n"&&(appendSvgElement(570,265,"#efb7b6"),$("#divCourt").notify("Net fault!",{position:"top center"})),(r.charAt(1)==="w"||r.charAt(1)==="d"||r.charAt(1)==="x"||r.charAt(1)==="g"||r.charAt(1)==="!"||r.charAt(1)==="e"||r.charAt(1)==="V")&&$("#divCourt").notify("Serve fault!",{position:"top center"}),r.charAt(1)!="w"&&r.charAt(1)!="d"&&r.charAt(1)!="x"&&r.charAt(1)!="g"&&r.charAt(1)!="!"&&r.charAt(1)!="e"&&r.charAt(1)!="V"&&r.charAt(1)!="n"&&(r.charAt(0)==="4"&&appendSvgElement(840,335,"#efb7b6"),r.charAt(0)==="5"&&appendSvgElement(840,277.5,"#efb7b6"),r.charAt(0)==="6"&&appendSvgElement(840,220,"#efb7b6"))))}function appendSvgElement(n,t,i){var u=document.getElementsByTagName("svg")[0],r=document.createElementNS("http://www.w3.org/2000/svg","circle");r.setAttribute("cx",n);r.setAttribute("cy",t);r.setAttribute("r","10");r.style.fill=i;u.appendChild(r)}$(document).ready(function(){var n=null;if(!window.EventSource){alert("Your browser does not support EventSource (IE/Edge?), please use a browser with EventSource support (see http://caniuse.com/#search=EventSource). Else you will experience difficulty in using the application");return}$("#divVisualisation").hide();$("#divVisualisationDisplay").hide();$("#ddlMatch").on("change",function(){this.value!="Select"?(n!=null&&n.close(),this.value=="2017Final"?$("#divVisualisation").show():($.notify("The match is not live right now! Please try at the schedule time to see live analysis.",{className:"error",clickToHide:!0,autoHide:!0,globalPosition:"top center"}),$("#ddlVisualisation").val("Select"),n!=null&&n.close(),$("#divVisualisation").hide(),$("#divVisualisationDisplay").html(""),d3.select("svg").remove(),$("#divVisualisationDisplay").hide())):($("#ddlVisualisation").val("Select"),n!=null&&n.close(),$("#divVisualisation").hide(),$("#divVisualisationDisplay").html(""),d3.select("svg").remove(),$("#divVisualisationDisplay").hide())});$("#ddlVisualisation").on("change",function(){this.value!="Select"?(n!=null&&n.close(),$("#divVisualisation").hide(),$("#divVisualisationDisplay").html(""),d3.select("svg").remove(),$("#divVisualisationDisplay").hide(),this.value=="Game"?($("#divVisualisation").show(),$("#divVisualisationDisplay").show(),n=new EventSource("http://localhost:3703/api/match"),n.onmessage=function(n){var t=JSON.parse(n.data),i=t.Players[0].Name,r=t.Players[1].Name,h=t.Players[0].CurrentGame,c=t.Players[1].CurrentGame,l=t.Players[0].CurrentSet,a=t.Players[1].CurrentSet,f=t.Players[0].TotalSet,e=t.Players[1].TotalSet,p=t.Players[0].NumberOfAces,w=t.Players[1].NumberOfAces,v=t.Players[0].Winner,y=t.Players[1].Winner,o=v==!0?i:y==!0?r:"",s,u;$("#divVisualisationDisplay").html("");d3.select("svg").remove();s="<div style='margin-top:10px;' id='currentGame'><div><b>Game In Progress<\/b><\/div><div><b>"+i+":<\/b> <span style='font-weight:bold;color:#0090d4;'>"+h+"<\/span><br/><b>"+r+":<\/b> <span style='font-weight:bold;color:#0090d4;'>"+c+"<\/span><\/div><\/div>";$("#divVisualisationDisplay").append(s);u=[{CurrentSet:l,Player:i},{CurrentSet:a,Player:r}];displayCurrentSet(u);$("#divVisualisationDisplay").append("<div style='margin- top:10px;padding-bottom:30px;text-align:center;width:800px;'><b>Number of Sets Won in Current Match<\/b><\/div>");(f!=0||e!=0)&&$("#divVisualisationDisplay").append("<div style='margin- top:10px;padding-bottom:30px;text-align:right;width:800px;'><div style='background-color:#b23738;width:15%;text-align:center;float:right;font-size:15px;color:white;'>Rafael Nadal<\/div><div style='background-color:#efb7b6;font-size:15px;width:15%;text-align:center;float:right;'>Roger Federer<\/div><\/div>");u=[{label:i,value:f},{label:r,value:e}];displayTotalSet(u);$("#divVisualisationDisplay").show();o&&$.notify("Congratulations "+o+", the winner",{className:"success",clickToHide:!0,autoHide:!0,globalPosition:"top center"})},n.onopen=function(){console.log("onopen")},n.onerror=function(){console.log("End of match");n.close()}):this.value=="1st Serve Percentage"?($("#divVisualisation").show(),$("#divVisualisationDisplay").show(),n=new EventSource("http://localhost:3703/api/match"),n.onmessage=function(n){var t=JSON.parse(n.data),i=t.Players[0].Name,r=t.Players[1].Name,o=t.Players[0].PercentageOfFirstServe,s=t.Players[1].PercentageOfFirstServe,h=t.Players[0].CurrentGame,c=t.Players[1].CurrentGame,l=t.Players[0].Winner,a=t.Players[1].Winner,u=l==!0?i:a==!0?r:"",f,e;$("#divVisualisationDisplay").html("");d3.select("svg").remove();f="<div style='margin-top:10px;' id='currentGame'><div><b>Game In Progress<\/b><\/div><div><b>"+i+":<\/b> <span style='font-weight:bold;color:#0090d4;'>"+h+"<\/span><br/><b>"+r+":<\/b> <span style='font-weight:bold;color:#0090d4;'>"+c+"<\/span><\/div><\/div>";$("#divVisualisationDisplay").append(f);e=[{CurrentSet:o,Player:i},{CurrentSet:s,Player:r}];displayFirstServePercentage(e);$("#divVisualisationDisplay").show();u&&$.notify("Congratulations "+u+", the winner",{className:"success",clickToHide:!0,autoHide:!0,globalPosition:"top center"})},n.onopen=function(){console.log("onopen")},n.onerror=function(){console.log("End of match");n.close()}):this.value=="Match Prediction"?($("#divVisualisation").show(),$("#divVisualisationDisplay").show(),n=new EventSource("http://localhost:3703/api/match"),n.onmessage=function(n){for(var o,s,t=JSON.parse(n.data),h=t.Players[0].Name,c=t.Players[1].Name,l=t.Players[0].Winner,a=t.Players[1].Winner,r=l==!0?h:a==!0?c:"",u=t.Players[0].WinningChance,v=t.Players[1].WinningChance,f=[],e=[],i=0;i<u.length;i++)f.push({probability:u[i],point:i+1}),e.push({probability:v[i],point:i+1});o={data:f};s={data:e};$("#divVisualisationDisplay").html("");d3.select("svg").remove();$("#divVisualisationDisplay").append("<div style='padding-top:20px;text-align:right;'><div style='background-color:#b23738;width:15%;text-align:center;float:right;font-size:15px;color:white;'>Rafael Nadal<\/div><div style='background-color:#efb7b6;font-size:15px;width:15%;text-align:center;float:right;color:black'>Roger Federer<\/div><\/div>");displayMatchWinningPrediction(o,s);r&&$.notify("Congratulations "+r+", the winner",{className:"success",clickToHide:!0,autoHide:!0,globalPosition:"top center"})},n.onopen=function(){console.log("onopen")},n.onerror=function(){console.log("End of match");n.close()}):this.value=="1st/2nd Serve On court Shot Pattern"?($("#divVisualisation").show(),$("#divVisualisationDisplay").show(),n=new EventSource("http://localhost:3703/api/match"),n.onmessage=function(n){var t=JSON.parse(n.data),r=t.Players[0].Name,u=t.Players[1].Name,f=t.Players[0].Winner,e=t.Players[1].Winner,i=f==!0?r:e==!0?u:"";$("#divVisualisationDisplay").html("");d3.select("svg").remove();$("#divVisualisationDisplay").append("<div style='padding-top:20px;text-align:right;padding-bottom:30px;'><div style='background-color:#b23738;width:15%;text-align:center;float:right;font-size:15px;color:white;'>Rafael Nadal<\/div><div style='background-color:#efb7b6;font-size:15px;width:15%;text-align:center;float:right;color:black'>Roger Federer<\/div><\/div>");displayOnCourtShotPattern(t.Players[0],t.Players[1]);i&&$.notify("Congratulations "+i+", the winner",{className:"success",clickToHide:!0,autoHide:!0,globalPosition:"top center"})},n.onopen=function(){console.log("onopen")},n.onerror=function(){console.log("End of match");n.close()}):this.value=="Number of Aces"&&($("#divVisualisation").show(),$("#divVisualisationDisplay").show(),n=new EventSource("http://localhost:3703/api/match"),n.onmessage=function(n){var t=JSON.parse(n.data),i=t.Players[0].Name,r=t.Players[1].Name,e=t.Players[0].CurrentGame,o=t.Players[1].CurrentGame,a=t.Players[0].CurrentSet,v=t.Players[1].CurrentSet,y=t.Players[0].TotalSet,p=t.Players[1].TotalSet,w=t.Players[0].NumberOfAces,b=t.Players[1].NumberOfAces,s=t.Players[0].Winner,h=t.Players[1].Winner,u=s==!0?i:h==!0?r:"",c=t.Players[0].NumberOfAces,l=t.Players[1].NumberOfAces,t=[{name:"Roger Federer",value:l},{name:"Rafael Nadal",value:c}],f;$("#divVisualisationDisplay").html("");d3.select("svg").remove();f="<div style='margin-top:10px;' id='currentGame'><div><b>Game In Progress<\/b><\/div><div><b>"+i+":<\/b> <span style='font-weight:bold;color:#0090d4;'>"+e+"<\/span><br/><b>"+r+":<\/b> <span style='font-weight:bold;color:#0090d4;'>"+o+"<\/span><\/div><\/div>";$("#divVisualisationDisplay").append(f);$("#divVisualisationDisplay").append("<div style='margin-top:30px;text-align:center;width:800px;'><b>Number of Aces<\/b><\/div>");displayNumberOfAces(t);u&&$.notify("Congratulations "+u+", the winner",{className:"success",clickToHide:!0,autoHide:!0,globalPosition:"top center"})},n.onopen=function(){console.log("onopen")},n.onerror=function(){console.log("End of match");n.close()})):(n!=null&&n.close(),$("#divVisualisationDisplay").html(""),d3.select("svg").remove(),$("#divVisualisationDisplay").hide())})});